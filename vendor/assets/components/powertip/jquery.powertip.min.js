(function(e){var c=e(document),b=e(window),d=e("body");var j={isPopOpen:false,isFixedPopOpen:false,isClosing:false,popOpenImminent:false,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,mouseTrackingActive:false};e.fn.powerTip=function(m){if(!this.length){return this}var l=e.extend({},e.fn.powerTip.defaults,m),n=new h(l);a();this.each(function(){var q=e(this),p=q.data("powertip"),o=q.data("powertipjq"),s=q.data("powertiptarget"),r=q.attr("title");if(!p&&!s&&!o&&r){q.data("powertip",r);q.removeAttr("title")}q.data("displayController",new g(q,l,n))});return this.on({mouseenter:function(o){f(o);j.previousX=o.pageX;j.previousY=o.pageY;e(this).data("displayController").show()},mouseleave:function(){e(this).data("displayController").hide()},focus:function(){var o=e(this);if(!k(o)){o.data("displayController").show(true)}},blur:function(){e(this).data("displayController").hide(true)}})};e.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:false,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:false,offset:10,mouseOnToPopup:false};e.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s","se","sw"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n","ne","nw"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"]};e.powerTip={showTip:function(l){e.powerTip.closeTip();l=l.first();if(!k(l)){l.data("displayController").show(true,true)}},closeTip:function(){c.triggerHandler("closePowerTip")}};function g(o,n,s){var l=null;function m(t,u){p();if(!o.data("hasActiveHover")){if(!t){j.popOpenImminent=true;l=setTimeout(function(){l=null;q(o)},n.intentPollInterval)}else{if(u){o.data("forcedOpen",true)}s.showTip(o)}}}function r(t){p();if(o.data("hasActiveHover")){j.popOpenImminent=false;o.data("forcedOpen",false);if(!t){l=setTimeout(function(){l=null;s.hideTip(o)},n.closeDelay)}else{s.hideTip(o)}}}function q(){var v=Math.abs(j.previousX-j.currentX),t=Math.abs(j.previousY-j.currentY),u=v+t;if(u<n.intentSensitivity){s.showTip(o)}else{j.previousX=j.currentX;j.previousY=j.currentY;m()}}function p(){l=clearTimeout(l)}return{show:m,hide:r,cancel:p}}function h(u){var s=e("#"+u.popupId);if(s.length===0){s=e("<div></div>",{id:u.popupId});if(d.length===0){d=e("body")}d.append(s)}if(u.followMouse){if(!s.data("hasMouseMove")){c.on({mousemove:r,scroll:r})}s.data("hasMouseMove",true)}if(u.followMouse||u.mouseOnToPopup){s.on({mouseenter:function(){if(s.data("followMouse")||s.data("mouseOnToPopup")){if(j.activeHover){j.activeHover.data("displayController").cancel()}}},mouseleave:function(){if(s.data("mouseOnToPopup")){if(j.activeHover){j.activeHover.data("displayController").hide()}}}})}function o(v){v.data("hasActiveHover",true);s.queue(function(w){n(v);w()})}function n(w){if(!w.data("hasActiveHover")){return}if(j.isPopOpen){if(!j.isClosing){q(j.activeHover)}s.delay(100).queue(function(A){n(w);A()});return}w.trigger("powerTipPreRender");var v=w.data("powertip"),y=w.data("powertiptarget"),z=w.data("powertipjq"),x=y?e("#"+y):[];if(v){s.html(v)}else{if(z&&z.length>0){s.empty();z.clone(true,true).appendTo(s)}else{if(x&&x.length>0){s.html(e("#"+y).html())}else{return}}}w.trigger("powerTipRender");c.on("closePowerTip",function(){w.data("displayController").hide(true)});j.activeHover=w;j.isPopOpen=true;s.data("followMouse",u.followMouse);s.data("mouseOnToPopup",u.mouseOnToPopup);if(!u.followMouse){m(w);j.isFixedPopOpen=true}else{r()}s.fadeIn(u.fadeInTime,function(){if(!j.desyncTimeout){j.desyncTimeout=setInterval(p,500)}w.trigger("powerTipOpen")})}function q(v){j.isClosing=true;v.data("hasActiveHover",false);v.data("forcedOpen",false);j.activeHover=null;j.isPopOpen=false;j.desyncTimeout=clearInterval(j.desyncTimeout);c.off("closePowerTip");s.fadeOut(u.fadeOutTime,function(){j.isClosing=false;j.isFixedPopOpen=false;s.removeClass();if(u.followMouse){l(j.currentX+u.offset,j.currentY+u.offset)}v.trigger("powerTipClose")})}function p(){if(j.isPopOpen&&!j.isClosing){var v=false;if(j.activeHover.data("hasActiveHover")===false){v=true}else{if(!k(j.activeHover)&&!j.activeHover.is(":focus")&&!j.activeHover.data("forcedOpen")){if(s.data("mouseOnToPopup")){if(!k(s)){v=true}}else{v=true}}}if(v){q(j.activeHover)}}}function r(){if((j.isPopOpen&&!j.isFixedPopOpen)||(j.popOpenImminent&&!j.isFixedPopOpen&&s.data("hasMouseMove"))){var A=b.scrollTop(),w=b.width(),D=b.height(),z=s.outerWidth(),C=s.outerHeight(),v=0,B=0;if((z+j.currentX+u.offset)<w){v=j.currentX+u.offset}else{v=w-z}if((C+j.currentY+u.offset)<(A+D)){B=j.currentY+u.offset}else{B=A+D-C}l(v,B)}}function m(z){var w=s.outerWidth(),B=s.outerHeight(),y,v,A,x;if(u.smartPlacement){y=e.fn.powerTip.smartPlacementLists[u.placement];e.each(y,function(C,D){v=t(z,D,w,B);A=D;x=i(v,w,B);if(x.length===0){return false}})}else{v=t(z,u.placement,w,B);A=u.placement}s.addClass(A);l(v.x,v.y)}function t(C,z,B,A){var D=C.offset(),w=C.outerWidth(),v=C.outerHeight(),F=0,E=0;switch(z){case"n":F=(D.left+(w/2))-(B/2);E=D.top-A-u.offset;break;case"e":F=D.left+w+u.offset;E=(D.top+(v/2))-(A/2);break;case"s":F=(D.left+(w/2))-(B/2);E=D.top+v+u.offset;break;case"w":F=D.left-B-u.offset;E=(D.top+(v/2))-(A/2);break;case"nw":F=(D.left-B)+20;E=D.top-A-u.offset;break;case"ne":F=(D.left+w)-20;E=D.top-A-u.offset;break;case"sw":F=(D.left-B)+20;E=D.top+v+u.offset;break;case"se":F=(D.left+w)-20;E=D.top+v+u.offset;break}return{x:Math.round(F),y:Math.round(E)}}function l(v,w){s.css("left",v+"px");s.css("top",w+"px")}return{showTip:o,hideTip:q}}function a(){var m=0,l=0;if(!j.mouseTrackingActive){j.mouseTrackingActive=true;e(function(){m=c.scrollLeft();l=c.scrollTop()});c.on({mousemove:f,scroll:function(){var n=c.scrollLeft(),o=c.scrollTop();if(n!==m){j.currentX+=n-m;m=n}if(o!==l){j.currentY+=o-l;l=o}}})}}function f(l){j.currentX=l.pageX;j.currentY=l.pageY}function k(l){var m=l.offset();return j.currentX>=m.left&&j.currentX<=m.left+l.outerWidth()&&j.currentY>=m.top&&j.currentY<=m.top+l.outerHeight()}function i(p,o,n){var r=b.scrollLeft(),q=b.scrollTop(),m=b.width(),s=b.height(),l=[];if(p.y<q){l.push("top")}if(p.y+n>q+s){l.push("bottom")}if(p.x<r){l.push("left")}if(p.x+o>r+m){l.push("right")}return l}}(jQuery));